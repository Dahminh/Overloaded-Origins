{
    "type": "origins:multiple",
    "glow": {
        "type": "origins:entity_glow",
        "use_teams": false,
        "red": 1.0,
        "green": 0.0,
        "blue": 0.0,
        "bientity_condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:distance",
                    "comparison": "<=",
                    "compare_to": 6
                },
                {
                    "type": "origins:relative_rotation",
                    "actor_rotation": "head",
                    "target_rotation": "body",
                    "comparison": ">",
                    "compare_to": 0.125
                },
                {
                    "type": "origins:can_see",
                    "shape_type": "visual"
                }
            ]
        },
        "entity_condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:living"
                },
                {
                    "type": "origins:entity_type",
                    "entity_type": "minecraft:armor_stand",
                    "inverted": true
                }
            ] 
        }
    },
    "constants": {
        "type": "origins:modify_damage_dealt",
        "bientity_condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:distance",
                    "comparison": "<=",
                    "compare_to": 6
                },
                {
                    "type": "origins:relative_rotation",
                    "actor_rotation": "head",
                    "target_rotation": "body",
                    "comparison": ">",
                    "compare_to": 0.125
                }
            ]
        },
        "target_condition": {
            "type": "origins:power",
            "power": "*:shadow_abilities/decoy/decoy_power",
            "inverted": true
        },
        "damage_condition": {
            "type": "origins:or",
            "conditions": [
                {
                    "type": "origins:name",
                    "name": "player"
                },
                {
                    "type": "origins:name",
                    "name": "player.item"
                }
            ]
        },
        "target_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:grant_power",
                    "power": "assassin:shadow_abilities/shadow_betrayal/shadow_betrayal_debuff",
                    "source": "apoli:command"
                },
                {
                    "type": "origins:if_else",
                    "condition": {
                        "type": "origins:power",
                        "power": "assassin:shadow_abilities/shadow_betrayal/shadow_betrayal_debuff",
                        "source": "apoli:command"
                    },
                    "if_action": {
                        "type": "origins:change_resource",
                        "resource": "*:shadow_abilities/shadow_betrayal/shadow_betrayal_debuff_timer",
                        "change": 0,
                        "operation": "set"
                    }
                }
            ]
        },
        "self_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:execute_command",
                    "command": "playsound minecraft:entity.arrow.hit_player ambient @s ~ ~ ~ 0.25 0.25"
                },
                {
                    "type": "origins:play_sound",
                    "sound": "minecraft:entity.player.attack.crit",
                    "pitch": 0.8
                },
                {
                    "type": "origins:if_else",
                    "condition": {
                        "type": "origins:status_effect",
                        "effect": "minecraft:invisibility",
                        "min_amplifier": 9
                    },
                    "if_action": {
                        "type": "origins:and",
                        "actions": [
                            {
                                "type": "origins:execute_command",
                                "command": "tag @s add prevent_stealth"
                            },
                            {
                                "type": "origins:delay",
                                "action": {
                                    "type": "origins:grant_power",
                                    "power": "*:shadow_abilities/stealth/stealth_reapply",
                                    "source": "apoli:command"
                                },
                                "ticks": 1
                            }
                        ]
                    }
                }
            ]
        }
    },
    "hidden": true
}